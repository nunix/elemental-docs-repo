"use strict";(self.webpackChunkelemental_docs=self.webpackChunkelemental_docs||[]).push([[4800],{16960:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var l=t(17624),r=t(4552);const o={sidebar_label:"Elemental components",title:""},a="Elemental components",s={id:"architecture-components",title:"",description:"The components required to provide the Elemental services are:",source:"@site/versioned_docs/version-1.5/architecture-components.md",sourceDirName:".",slug:"/architecture-components",permalink:"/architecture-components",draft:!1,unlisted:!1,tags:[],version:"1.5",frontMatter:{sidebar_label:"Elemental components",title:""},sidebar:"docs",previous:{title:"Overview",permalink:"/architecture"},next:{title:"Custom Resources",permalink:"/custom-resources"}},i={},c=[{value:"<code>elemental</code> command line tool",id:"elemental-command-line-tool",level:3},{value:"<code>elemental-operator</code> daemon",id:"elemental-operator-daemon",level:3},{value:"<code>elemental-register</code> command line tool",id:"elemental-register-command-line-tool",level:3},{value:"<code>elemental-system-agent</code> daemon",id:"elemental-system-agent-daemon",level:3},{value:"Elemental OS container image",id:"elemental-os-container-image",level:3}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.M)(),...e.components},{Vars:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Vars",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{id:"elemental-components",children:"Elemental components"}),"\n",(0,l.jsxs)(n.p,{children:["The components required to provide the ",(0,l.jsx)(n.a,{href:"/architecture-services",children:"Elemental services"})," are:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["the ",(0,l.jsx)(n.a,{href:"#elemental-command-line-tool",children:(0,l.jsx)(n.code,{children:"elemental"})})," command line tool"]}),"\n",(0,l.jsxs)(n.li,{children:["the ",(0,l.jsx)(n.a,{href:"#elemental-operator-daemon",children:(0,l.jsx)(n.code,{children:"elemental-operator"})})," daemon"]}),"\n",(0,l.jsxs)(n.li,{children:["the ",(0,l.jsx)(n.a,{href:"#elemental-register-command-line-tool",children:(0,l.jsx)(n.code,{children:"elemental-register"})})," command line tool"]}),"\n",(0,l.jsxs)(n.li,{children:["the ",(0,l.jsx)(n.a,{href:"#elemental-system-agent-daemon",children:(0,l.jsx)(n.code,{children:"elemental-system-agent"})})," daemon"]}),"\n",(0,l.jsxs)(n.li,{children:["one or more ",(0,l.jsx)(n.a,{href:"#elemental-os-container-image",children:"Elemental OS container images"})]}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"elemental-command-line-tool",children:[(0,l.jsx)(n.code,{children:"elemental"})," command line tool"]}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"elemental"})," tool is part of the ",(0,l.jsx)(t,{name:"elemental_toolkit_name",link:"elemental_toolkit_url"})," project.\nIt performs the actual OS installation and upgrade operations on the host and is used to execute the ",(0,l.jsx)(n.a,{href:"/cloud-config-reference",children:"cloud-config"})," directives added in the ",(0,l.jsx)(n.a,{href:"/custom-resources",children:"Elemental CRDs"}),"."]}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"elemental"})," binary is included in all the base OS images distributed with Elemental."]}),"\n",(0,l.jsxs)(n.h3,{id:"elemental-operator-daemon",children:[(0,l.jsx)(n.code,{children:"elemental-operator"})," daemon"]}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.strong,{children:"elemental-operator"})," daemon performs two main tasks:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["embeds the Elemental Kubernetes controllers to manage all the ",(0,l.jsx)(n.a,{href:"/custom-resources",children:"Elemental CRDs"})]}),"\n",(0,l.jsxs)(n.li,{children:["exposes the ",(0,l.jsx)(n.em,{children:"registration endpoints"})," to allow the host to register and download the OS installation configuration during the ",(0,l.jsx)(n.a,{href:"/architecture-machineonboarding",children:"machine onboarding"})]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"elemental-operator"})," daemon is deployed on the Rancher cluster as a ",(0,l.jsx)(n.code,{children:"Deployment"})," via the ",(0,l.jsx)(n.a,{href:"/elementaloperatorchart-reference",children:"Elemental Operator Helm Chart"}),"."]}),"\n",(0,l.jsxs)(n.h3,{id:"elemental-register-command-line-tool",children:[(0,l.jsx)(n.code,{children:"elemental-register"})," command line tool"]}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.strong,{children:"elemental-register"})," binary is the client used to register the host against the ",(0,l.jsx)(n.em,{children:"registration endpoints"})," exposed by the ",(0,l.jsx)(n.a,{href:"#elemental-operator-daemon",children:"elemental-operator"}),". It collects and forwards the host data to allow the ",(0,l.jsx)(n.a,{href:"#elemental-operator-daemon",children:"elemental-operator"})," to fill the ",(0,l.jsx)(n.a,{href:"/smbios",children:"SMBIOS"})," and the ",(0,l.jsx)(n.a,{href:"/hardwarelabels",children:"Hardware"})," label templates."]}),"\n",(0,l.jsxs)(n.p,{children:["If the registraton phase is performed successfully, the ",(0,l.jsx)(n.strong,{children:"elemental-register"})," gets the full configuration stored in the ",(0,l.jsx)(n.a,{href:"/machineregistration-reference",children:"MachineRegistration"})," from the ",(0,l.jsx)(n.strong,{children:"elemental-operator"}),".\nAs the last step, the ",(0,l.jsx)(n.strong,{children:"elemental-register"})," client calls the ",(0,l.jsx)(n.a,{href:"#elemental-command-line-tool",children:"elemental"})," binary passing the retrieved configuration to kick off the OS installation."]}),"\n",(0,l.jsxs)(n.h3,{id:"elemental-system-agent-daemon",children:[(0,l.jsx)(n.code,{children:"elemental-system-agent"})," daemon"]}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"elemental-system-agent"})," is built from the ",(0,l.jsx)(n.a,{href:"https://github.com/rancher/system-agent",children:"Rancher System Agent project"})," and allows Elemental to deploy ",(0,l.jsx)(n.em,{children:"plans"})," to assist with the host provisioning.\nNotably, the ",(0,l.jsx)(n.code,{children:"rancher-system-agent"})," installation and configuration required for the ",(0,l.jsx)(n.a,{href:"/architecture-clusterdeployment",children:"Kubernetes Cluster provisioning service"})," is performed through an ",(0,l.jsx)(n.code,{children:"elemental-system-agent"})," ",(0,l.jsx)(n.em,{children:"plan"}),"."]}),"\n",(0,l.jsx)(n.h3,{id:"elemental-os-container-image",children:"Elemental OS container image"}),"\n",(0,l.jsxs)(n.p,{children:["An ",(0,l.jsx)(t,{name:"elemental_toolkit_name",link:"elemental_toolkit_url"})," OS image is an OCI container image containing all the files that will make up the OS of the target host. It contains not only all the binaries and libraries, but also the kernel and the boot files required by a linux system."]}),"\n",(0,l.jsxs)(n.p,{children:["The Elemental OS image is an opinionated ",(0,l.jsx)(t,{name:"elemental_toolkit_name",link:"elemental_toolkit_url"})," OS image which is based on ",(0,l.jsx)(n.a,{href:"https://www.suse.com/products/micro/",children:"SLE Micro"})," and contains specific Elemental configurations and binaries (the ",(0,l.jsx)(n.a,{href:"#elemental-command-line-tool",children:"elemental"})," and the ",(0,l.jsx)(n.a,{href:"#elemental-register-command-line-tool",children:"elemental-register"})," ones)."]}),"\n",(0,l.jsxs)(n.p,{children:["The Elemental OS images are tracked in the ",(0,l.jsx)(n.a,{href:"/managedosversion-reference",children:"ManagedOSVersions"})," resources. The ",(0,l.jsx)(n.a,{href:"/managedosversion-reference",children:"ManagedOSVersions"})," resources are dynamically created from ",(0,l.jsx)(n.a,{href:"/managedosversionchannel-reference",children:"ManagedOSVersionChannel"})," resources. A default",(0,l.jsx)(n.a,{href:"/managedosversionchannel-reference",children:"ManagedOSVersionChannel"})," resource is deployed with each Elemental Operator installation."]})]})}function h(e={}){const{wrapper:n}={...(0,r.M)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},4552:(e,n,t)=>{t.d(n,{I:()=>s,M:()=>a});var l=t(11504);const r={},o=l.createContext(r);function a(e){const n=l.useContext(o);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),l.createElement(o.Provider,{value:n},e.children)}}}]);