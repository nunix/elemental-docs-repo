"use strict";(self.webpackChunkelemental_docs=self.webpackChunkelemental_docs||[]).push([[4628],{74812:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>h});var i=t(17624),r=t(4552);const o={sidebar_label:"Machine onboarding",title:""},a=void 0,s={id:"architecture-machineonboarding",title:"",description:"Machine onboarding",source:"@site/versioned_docs/version-1.5/architecture-machineonboarding.md",sourceDirName:".",slug:"/architecture-machineonboarding",permalink:"/architecture-machineonboarding",draft:!1,unlisted:!1,tags:[],version:"1.5",frontMatter:{sidebar_label:"Machine onboarding",title:""},sidebar:"docs",previous:{title:"Services",permalink:"/architecture-services"},next:{title:"Kubernetes cluster provisioning",permalink:"/architecture-clusterdeployment"}},c={},h=[{value:"Machine onboarding",id:"machine-onboarding",level:2}];function l(e){const n={a:"a",code:"code",em:"em",h2:"h2",li:"li",p:"p",ul:"ul",...(0,r.M)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"machine-onboarding",children:"Machine onboarding"}),"\n",(0,i.jsxs)(n.p,{children:["The goal of the Machine Onboarding service is to register a new machine in the Elemental Operator catalog (",(0,i.jsx)(n.a,{href:"/machineinventory-reference",children:"MachineInventory"})," resources) and provision the host with the OS, applying the desired configuration."]}),"\n",(0,i.jsx)(n.p,{children:"The Machine Onboarding involves the following steps:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The user creates a ",(0,i.jsx)(n.a,{href:"/machineregistration-reference",children:"MachineRegistration"})," resource: the MachineRegistration includes the configuration required for the OS installation.\nAs soon as the MachineRegistration is created, the Elemental Operator exposes an HTTP ",(0,i.jsx)(n.em,{children:"registration endpoint"}),": it is the entrypoint required by the onboarding hosts to register to the operator."]}),"\n",(0,i.jsxs)(n.li,{children:["The user requests a self-installing image via a ",(0,i.jsx)(n.a,{href:"/seedimage-reference",children:"SeedImage"})," resource: it only requires a reference to a MachineRegistration resource and to an OS container image compatible with the Elemental Toolkit.\nAs soon as the SeedImage is created, the Elemental Operator triggers the build process of the self-installing image: once completed, the URL is exposed in the ",(0,i.jsx)(n.code,{children:"status.downloadURL"})," field of the ",(0,i.jsx)(n.a,{href:"/seedimage-reference",children:"SeedImage"})," resource."]}),"\n",(0,i.jsxs)(n.li,{children:["The user downloads the self-installing image and uses it to boot an unprovisioned host:\nthe host ",(0,i.jsx)(n.a,{href:"https://elemental.docs.rancher.com/authentication",children:"authenticates"})," to the ",(0,i.jsx)(n.em,{children:"registration endpoint"})," of the Elemental Operator, gets the full configuration stored in the MachineRegistration and installs the OS on the local storage device. As soon as the host has completed the registration process, the Elemental Operator creates a unique ",(0,i.jsx)(n.a,{href:"/machineinventory-reference",children:"MachineInventory"})," resource tracking the host.\nThe self-installing image can be used to onboard any number of hosts."]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,r.M)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},4552:(e,n,t)=>{t.d(n,{I:()=>s,M:()=>a});var i=t(11504);const r={},o=i.createContext(r);function a(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);