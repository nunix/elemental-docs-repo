"use strict";(self.webpackChunkelemental_docs=self.webpackChunkelemental_docs||[]).push([[7332],{38780:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>s});var o=t(17624),i=t(4552);const a={sidebar_label:"Configure a VLAN",title:""},r=void 0,c={id:"networking-vlans",title:"",description:"How to configure a VLAN",source:"@site/versioned_docs/version-1.4/networking-vlans.md",sourceDirName:".",slug:"/networking-vlans",permalink:"/1.4/networking-vlans",draft:!1,unlisted:!1,tags:[],version:"1.4",frontMatter:{sidebar_label:"Configure a VLAN",title:""},sidebar:"docs",previous:{title:"Configure Networking",permalink:"/1.4/networking"},next:{title:"Configure Wi-Fi",permalink:"/1.4/wifi"}},l={},s=[{value:"How to configure a VLAN",id:"how-to-configure-a-vlan",level:3},{value:"Generate a VLAN connection profile on a live host",id:"generate-a-vlan-connection-profile-on-a-live-host",level:4},{value:"Elemental MachineRegistration with VLAN injected cloud-config",id:"elemental-machineregistration-with-vlan-injected-cloud-config",level:4}];function d(e){const n={code:"code",h3:"h3",h4:"h4",p:"p",pre:"pre",...(0,i.M)(),...e.components},{Head:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t,{children:(0,o.jsx)("link",{rel:"canonical",href:"https://elemental.docs.rancher.com/networking/vlan"})}),"\n",(0,o.jsx)(n.h3,{id:"how-to-configure-a-vlan",children:"How to configure a VLAN"}),"\n",(0,o.jsx)(n.h4,{id:"generate-a-vlan-connection-profile-on-a-live-host",children:"Generate a VLAN connection profile on a live host"}),"\n",(0,o.jsx)(n.p,{children:"Let's configure NetworkManager to add a VLAN interface on top of the eth0 device with a VLAN ID = 1"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",metastring:'title="Example: generate a VLAN connection profile with nmcli" showLineNumbers',children:"# nmcli connection add type vlan vlan.id 1 vlan.parent eth0\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",metastring:'title="Example: retrieve VLAN connection profile keyfile content" showLineNumbers',children:"# cat /etc/NetworkManager/system-connections/vlan.nmconnection\n[connection]\nid=vlan\nuuid=7a9908f4-bed9-4401-8de4-4e7631b5d39e\ntype=vlan\n\n[ethernet]\n\n[vlan]\nflags=1\nid=1\nparent=eth0\n\n[ipv4]\nmethod=auto\n\n[ipv6]\naddr-gen-mode=stable-privacy\nmethod=auto\n\n[proxy]\n"})}),"\n",(0,o.jsx)(n.h4,{id:"elemental-machineregistration-with-vlan-injected-cloud-config",children:"Elemental MachineRegistration with VLAN injected cloud-config"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",metastring:'title="Example: MachineRegistration with injected VLAN connection profile" showLineNumbers',children:"apiVersion: elemental.cattle.io/v1beta1\nkind: MachineRegistration\nmetadata:\n  name: fire-nodes\n  namespace: fleet-default\nspec:\n  config:\n    cloud-config:\n      users:\n        - name: root\n          passwd: root\n      write_files:\n        - content: |\n            [connection]\n            id=vlan\n            uuid=7a9908f4-bed9-4401-8de4-4e7631b5d39e\n            type=vlan\n\n            [vlan]\n            flags=1\n            id=1\n            parent=eth0\n\n            [ipv4]\n            method=auto\n\n            [ipv6]\n            addr-gen-mode=stable-privacy\n            method=auto\n       path: /etc/NetworkManager/system-connections/vlan.nmconnection\n       permissions: 600\n[...]\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.M)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},4552:(e,n,t)=>{t.d(n,{I:()=>c,M:()=>r});var o=t(11504);const i={},a=o.createContext(i);function r(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);